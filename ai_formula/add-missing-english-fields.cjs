const fs = require('fs');
const path = require('path');

console.log('開始為所有工具添加缺少的英文字段...');

// 英文翻譯映射
const translations = {
  // 標籤翻譯
  tags: {
    'AI 繪圖': 'AI Drawing',
    '藝術創作': 'Art Creation',
    '概念設計': 'Concept Design',
    '開源AI': 'Open Source AI',
    '圖像生成': 'Image Generation',
    '免費工具': 'Free Tools',
    'AI藝術': 'AI Art',
    '商業AI': 'Business AI',
    '專業設計': 'Professional Design',
    '文字渲染': 'Text Rendering',
    '海報設計': 'Poster Design',
    '品牌設計': 'Brand Design',
    '創意實驗': 'Creative Experiments',
    '多模型': 'Multi-Model',
    '風格混合': 'Style Mixing',
    '圖像演化': 'Image Evolution',
    '協作創作': 'Collaborative Creation',
    '藝術探索': 'Art Exploration',
    '影片生成': 'Video Generation',
    'AI 藝術': 'AI Art',
    '音樂生成': 'Music Generation',
    '創意工具': 'Creative Tools',
    '多模態 AI': 'Multimodal AI',
    'AI 影片': 'AI Video',
    'AI 音頻': 'AI Audio',
    '設計素材': 'Design Materials',
    'AI素材': 'AI Materials',
    '向量圖': 'Vector Graphics',
    'AI 圖片': 'AI Images',
    '免版稅圖庫': 'Royalty-Free Stock',
    '圖像資源': 'Image Resources',
    'AI影片': 'AI Video',
    '專業工具': 'Professional Tools',
    'AI 模型': 'AI Model',
    '圖片轉影片': 'Image to Video',
    '開源工具': 'Open Source Tools',
    'AI 影片生成': 'AI Video Generation',
    '虛擬主播': 'Virtual Presenter',
    '文本轉影片': 'Text to Video',
    'AI 虛擬人': 'AI Avatar',
    'AI配音': 'AI Voiceover',
    '多語言': 'Multilingual',
    '內容轉影片': 'Content to Video',
    'AI 影片製作': 'AI Video Production',
    '社交媒體影片': 'Social Media Video',
    '文轉影片': 'Text to Video',
    '社交媒體': 'Social Media',
    '內容再利用': 'Content Repurposing',
    '虛擬化身': 'Virtual Avatar',
    '數字人': 'Digital Human',
    'AI 影片創作': 'AI Video Creation',
    '自動化內容': 'Automated Content',
    '短影片生成': 'Short Video Generation',
    '智能編輯': 'Smart Editing',
    '影片創作': 'Video Creation',
    '自動化': 'Automation',
    '圖像增強': 'Image Enhancement',
    '影片編輯': 'Video Editing',
    '在線影片編輯': 'Online Video Editing',
    'AI 字幕': 'AI Subtitles',
    '影片工具': 'Video Tools',
    '智能剪輯': 'Smart Editing',
    'AI 影片編輯': 'AI Video Editing',
    '長影片轉短片': 'Long to Short Video',
    '影片再利用': 'Video Repurposing',
    'AI 剪輯': 'AI Editing',
    '播客製作': 'Podcast Production',
    'AI 轉錄': 'AI Transcription',
    '營銷影片': 'Marketing Videos',
    '品牌宣傳': 'Brand Promotion',
    '商業模板': 'Business Templates',
    'AI編輯': 'AI Editing',
    '微軟工具': 'Microsoft Tools',
    '協作編輯': 'Collaborative Editing',
    '團隊工具': 'Team Tools',
    'AI增強': 'AI Enhanced',
    '快速製作': 'Quick Production',
    '簡單易用': 'Easy to Use',
    '豐富模板': 'Rich Templates',
    '屏幕錄製': 'Screen Recording',
    '雲端存儲': 'Cloud Storage',
    '創成式填充': 'Generative Fill',
    '圖像去背': 'Background Removal',
    'AI 圖像編輯': 'AI Image Editing',
    '在線工具': 'Online Tools',
    '圖像放大': 'Image Upscaling',
    '開源軟件': 'Open Source Software',
    '線上放大': 'Online Upscaling',
    '無損放大': 'Lossless Upscaling',
    '多格式支援': 'Multi-format Support',
    '線上編輯': 'Online Editing',
    'PSD支援': 'PSD Support',
    '人像美化': 'Portrait Enhancement',
    'AI美顏': 'AI Beauty',
    '照片修圖': 'Photo Retouching',
    '透明背景': 'Transparent Background',
    'PNG製作': 'PNG Creation',
    '產品圖片': 'Product Images',
    '平面設計': 'Graphic Design',
    '模板': 'Templates',
    'AI 設計': 'AI Design',
    'AI頭像': 'AI Avatar',
    '人像生成': 'Portrait Generation',
    '虛擬形象': 'Virtual Character',
    'AI角色': 'AI Character',
    '創意對話': 'Creative Dialogue',
    '角色發展': 'Character Development',
    '企業影片': 'Corporate Videos',
    '動畫製作': 'Animation Production',
    '培訓內容': 'Training Content',
    '創意編程': 'Creative Coding',
    'AI 工具': 'AI Tools',
    '3D 圖形': '3D Graphics',
    '互動故事': 'Interactive Stories',
    'AI遊戲': 'AI Games',
    '創意娛樂': 'Creative Entertainment',
    '語音生成': 'Voice Generation',
    'AI 語音': 'AI Voice',
    '文本轉語音': 'Text to Speech',
    '畫外音': 'Voiceover',
    '語音閱讀': 'Voice Reading',
    '學習工具': 'Learning Tools',
    '企業語音': 'Enterprise Voice',
    '商業應用': 'Business Applications',
    '語音克隆': 'Voice Cloning',
    '個性化語音': 'Personalised Voice',
    '隱私保護': 'Privacy Protection',
    '音軌分離': 'Audio Separation',
    '音頻處理': 'Audio Processing',
    '音樂製作': 'Music Production',
    '變聲器': 'Voice Changer',
    '實時語音': 'Real-time Voice',
    '遊戲工具': 'Gaming Tools',
    'AI音樂': 'AI Music',
    '音樂創作': 'Music Creation',
    'AI背景音樂': 'AI Background Music',
    '免版權音樂': 'Royalty-Free Music',
    '內容創作': 'Content Creation',
    '音頻編輯': 'Audio Editing',
    '播客工具': 'Podcast Tools',
    '噪音消除': 'Noise Reduction',
    '寫作助手': 'Writing Assistant',
    '語法檢查': 'Grammar Check',
    '寫作優化': 'Writing Optimisation',
    'AI助手': 'AI Assistant',
    '深度分析': 'Deep Analysis',
    '創意寫作': 'Creative Writing',
    '智能筆記': 'Smart Notes',
    '生產力工具': 'Productivity Tools',
    '快速寫作': 'Quick Writing',
    '批量創作': 'Batch Creation',
    '多樣風格': 'Multiple Styles',
    '文字重寫': 'Text Rewriting',
    '文字改善': 'Text Improvement',
    '表達優化': 'Expression Optimisation',
    'AI改寫': 'AI Rewriting',
    '同義詞替換': 'Synonym Replacement',
    '原創性檢查': 'Originality Check',
    'AI 寫作': 'AI Writing',
    '內容生成': 'Content Generation',
    '文案工具': 'Copywriting Tools',
    '文案生成': 'Copy Generation',
    '市場營銷': 'Marketing',
    'SEO': 'SEO',
    '語音轉文字': 'Speech to Text',
    '會議記錄': 'Meeting Notes',
    '會議助手': 'Meeting Assistant',
    '任務管理': 'Task Management',
    '遠程錄製': 'Remote Recording',
    '高清錄影': 'HD Recording',
    '演示文稿': 'Presentations',
    'AI 生成': 'AI Generated',
    '文件設計': 'Document Design',
    '智能設計': 'Smart Design',
    '簡報製作': 'Presentation Creation',
    '廣告創意': 'Ad Creative',
    '社交媒體設計': 'Social Media Design',
    '輪播圖': 'Carousel',
    '潛在客戶開發': 'Lead Generation',
    '電子書生成': 'eBook Generation',
    '數據分析': 'Data Analysis',
    'AI 數據': 'AI Data',
    'AI記憶': 'AI Memory',
    '個人化AI': 'Personalised AI',
    '智能助手': 'Smart Assistant',
    '數據可視化': 'Data Visualisation',
    '智能分析': 'Smart Analytics',
    'BI工具': 'BI Tools',
    '商業智能': 'Business Intelligence',
    '預測分析': 'Predictive Analytics',
    '自動洞察': 'Automated Insights',
    '大數據': 'Big Data',
    '機器學習': 'Machine Learning',
    '企業AI': 'Enterprise AI',
    '網站分析': 'Website Analytics',
    '智能洞察': 'Smart Insights',
    '搜索引擎優化': 'Search Engine Optimisation',
    '市場營銷自動化': 'Marketing Automation',
    '銷售工具': 'Sales Tools',
    '網絡保安': 'Cybersecurity',
    'AI 安全': 'AI Security',
    'AI 開發': 'AI Development',
    '開發工具': 'Development Tools',
    'AI降噪': 'AI Noise Reduction',
    '會議工具': 'Meeting Tools',
    '音頻清理': 'Audio Cleanup',
    '工作流程自動化': 'Workflow Automation',
    '效率工具': 'Efficiency Tools',
    '數據抓取': 'Data Scraping',
    '應用集成': 'App Integration',
    '工作流程': 'Workflow',
    '網站建設': 'Website Building',
    'AI 建站': 'AI Website Builder',
    '小型企業': 'Small Business',
    '社交媒體管理': 'Social Media Management',
    '個人品牌': 'Personal Branding',
    '社交媒體增長': 'Social Media Growth',
    '工作管理': 'Work Management',
    '項目追蹤': 'Project Tracking',
    '團隊協作': 'Team Collaboration',
    '銷售預測': 'Sales Forecasting',
    '客戶洞察': 'Customer Insights',
    '郵件營銷': 'Email Marketing',
    '客戶細分': 'Customer Segmentation',
    '內容優化': 'Content Optimisation',
    '內容策略': 'Content Strategy',
    '發布優化': 'Publishing Optimisation'
  },
  
  // 目標受眾翻譯
  targetAudience: {
    '數字藝術家': 'Digital Artists',
    '概念設計師': 'Concept Designers',
    '插畫家': 'Illustrators',
    '創意總監': 'Creative Directors',
    '開發者': 'Developers',
    '研究人員': 'Researchers',
    'AI愛好者': 'AI Enthusiasts',
    '藝術家': 'Artists',
    '設計師': 'Designers',
    '創意工作者': 'Creative Workers',
    '專業設計師': 'Professional Designers',
    '廣告公司': 'Advertising Agencies',
    '品牌團隊': 'Brand Teams',
    '平面設計師': 'Graphic Designers',
    '品牌設計師': 'Brand Designers',
    '營銷人員': 'Marketing Professionals',
    '創意探索者': 'Creative Explorers',
    '廣告創意人員': 'Advertising Creatives',
    '內容創作者': 'Content Creators',
    '影片製作人': 'Video Producers',
    '網頁設計師': 'Web Designers',
    'UI/UX 設計師': 'UI/UX Designers',
    '市場營銷人員': 'Marketing Professionals',
    '博客作者': 'Bloggers',
    '影片創作者': 'Video Creators',
    '專業導演': 'Professional Directors',
    '創意工作室': 'Creative Studios',
    '電影行業': 'Film Industry',
    '視覺特效藝術家': 'VFX Artists',
    '創意專業人士': 'Creative Professionals',
    '視頻製作人': 'Video Producers',
    '動畫師': 'Animators',
    '視覺藝術家': 'Visual Artists',
    '企業培訓師': 'Corporate Trainers',
    '教師': 'Teachers',
    '市場營銷團隊': 'Marketing Teams',
    '企業培訓部門': 'Corporate Training Departments',
    '數字行銷人員': 'Digital Marketers',
    '教育工作者': 'Educators',
    '內容營銷人員': 'Content Marketers',
    '社交媒體經理': 'Social Media Managers',
    '數字營銷人員': 'Digital Marketing Professionals',
    '企業通訊部門': 'Corporate Communications',
    '新聞機構': 'News Organisations',
    '小型企業主': 'Small Business Owners',
    '小企業主': 'Small Business Owners',
    '攝影師': 'Photographers',
    '小型企業': 'Small Businesses',
    'YouTuber': 'YouTubers',
    '播客主': 'Podcasters',
    '在線課程製作者': 'Online Course Creators',
    '數碼營銷機構': 'Digital Marketing Agencies',
    '記者': 'Journalists',
    '品牌經理': 'Brand Managers',
    '營銷團隊': 'Marketing Teams',
    '企業用戶': 'Enterprise Users',
    '專業編輯師': 'Professional Editors',
    '內容團隊': 'Content Teams',
    '設計團隊': 'Design Teams',
    '教育機構': 'Educational Institutions',
    '初學者': 'Beginners',
    '個人創作者': 'Individual Creators',
    '產品經理': 'Product Managers',
    '遊戲玩家': 'Gamers',
    '任何需要錄屏的人': 'Anyone Needing Screen Recording',
    '專業攝影師': 'Professional Photographers',
    '修圖師': 'Photo Retouchers',
    '電商賣家': 'E-commerce Sellers',
    '社交媒體用戶': 'Social Media Users',
    '攝影愛好者': 'Photography Enthusiasts',
    '普通用戶': 'General Users',
    '學生': 'Students',
    '預算有限用戶': 'Budget-Conscious Users',
    '個人用戶': 'Personal Users',
    '所有人': 'Everyone',
    '遊戲開發者': 'Game Developers',
    '虛擬主播': 'Virtual Streamers',
    '品牌營銷人員': 'Brand Marketers',
    '創意寫作者': 'Creative Writers',
    'HR團隊': 'HR Teams',
    '公司內訓': 'Corporate Training',
    '創意技術專家': 'Creative Technologists',
    '互動設計師': 'Interaction Designers',
    '前端開發者': 'Frontend Developers',
    'Web 開發者': 'Web Developers',
    '3D 藝術家': '3D Artists',
    '遊戲愛好者': 'Gaming Enthusiasts',
    '故事創作者': 'Story Creators',
    '視障人士': 'Visually Impaired Users',
    '忙碌專業人士': 'Busy Professionals',
    '企業培訓': 'Corporate Training',
    '企業': 'Enterprises',
    '音樂製作人': 'Music Producers',
    '音頻工程師': 'Audio Engineers',
    'DJ': 'DJs',
    '遊戲玩家': 'Gamers',
    '直播主': 'Streamers',
    '音頻編輯師': 'Audio Editors',
    '專業寫作者': 'Professional Writers',
    '商業人士': 'Business Professionals',
    '分析師': 'Analysts',
    '寫作者': 'Writers',
    '知識工作者': 'Knowledge Workers',
    '團隊協作': 'Team Collaboration',
    '內容營銷': 'Content Marketing',
    '自由撰稿人': 'Freelance Writers',
    '小企業': 'Small Businesses',
    '學術寫作': 'Academic Writing',
    '商業寫作': 'Business Writing',
    '英語學習者': 'English Learners',
    '企業主': 'Business Owners',
    '廣告人員': 'Advertising Professionals',
    '電商企業': 'E-commerce Businesses',
    '企業團隊': 'Enterprise Teams',
    '項目經理': 'Project Managers',
    '銷售團隊': 'Sales Teams',
    '任何需要開會的專業人士': 'Any Meeting Professionals',
    '媒體公司': 'Media Companies',
    '企業營銷團隊': 'Corporate Marketing Teams',
    '顧問': 'Consultants',
    '創始人': 'Founders',
    '企業顧問': 'Business Consultants',
    '銷售人員': 'Sales Professionals',
    '任何需要製作專業簡報的人': 'Anyone Needing Professional Presentations',
    '電商品牌': 'E-commerce Brands',
    '數碼營銷機構': 'Digital Marketing Agencies',
    '品牌顧問': 'Brand Consultants',
    '教練': 'Coaches',
    '課程創作者': 'Course Creators',
    '企業家': 'Entrepreneurs',
    '數據分析師': 'Data Analysts',
    '商業分析師': 'Business Analysts',
    '企業決策者': 'Business Decision Makers',
    'Blogger': 'Bloggers',
    '市場推廣人員': 'Marketing Professionals',
    '老師': 'Teachers',
    '商業智能': 'Business Intelligence',
    '決策者': 'Decision Makers',
    '企業分析師': 'Enterprise Analysts',
    '財務團隊': 'Finance Teams',
    '管理層': 'Management',
    '數據科學家': 'Data Scientists',
    'ML工程師': 'ML Engineers',
    '企業AI團隊': 'Enterprise AI Teams',
    '數字營銷': 'Digital Marketing',
    '網站管理': 'Website Management',
    '電商分析': 'E-commerce Analytics',
    'SEO 專業人員': 'SEO Professionals',
    '網站管理員': 'Website Administrators',
    '數碼營銷人員': 'Digital Marketing Professionals',
    '網絡保安專家': 'Cybersecurity Experts',
    'IT 管理員': 'IT Administrators',
    '企業安全團隊': 'Enterprise Security Teams',
    'ML 研究者': 'ML Researchers',
    'AI 工程師': 'AI Engineers',
    'AI 開發者': 'AI Developers',
    '軟體工程師': 'Software Engineers',
    '遠程工作者': 'Remote Workers',
    '任何希望提高生產力的人': 'Anyone Seeking Productivity',
    '任何使用多個網絡應用程式的人': 'Anyone Using Multiple Web Apps',
    '自由職業者': 'Freelancers',
    '創業者': 'Entrepreneurs',
    '任何需要快速建站的人': 'Anyone Needing Quick Websites',
    '尋求職業發展的專業人士': 'Career Development Professionals',
    'Twitter (X) 創作者': 'Twitter (X) Creators',
    '團隊領導': 'Team Leaders',
    '企業管理': 'Enterprise Management',
    'CRM管理員': 'CRM Administrators',
    '電商': 'E-commerce',
    '品牌營銷': 'Brand Marketing',
    '代理商': 'Agencies'
  }
};

// 翻譯函數
function translateTags(chineseTags) {
  return chineseTags.map(tag => translations.tags[tag] || tag);
}

function translateTargetAudience(chineseAudience) {
  return chineseAudience.map(audience => translations.targetAudience[audience] || audience);
}

// 讀取檔案
const filePath = path.join(__dirname, 'src/data/tools-data.ts');
let content = fs.readFileSync(filePath, 'utf8');

console.log('正在處理工具翻譯...');

// 使用正則表達式處理每個工具對象
content = content.replace(
  /(\{[^{}]*?id:\s*'[^']*'[^{}]*?targetAudience:\s*\[[^\]]*?\])(,?\s*userGroups[^}]*?\})/g,
  (match, beforeUserGroups, afterTargetAudience) => {
    // 提取 targetAudience 陣列
    const targetAudienceMatch = match.match(/targetAudience:\s*(\[[^\]]*?\])/);
    if (targetAudienceMatch) {
      const targetAudienceStr = targetAudienceMatch[1];
      try {
        const targetAudience = JSON.parse(targetAudienceStr.replace(/'/g, '"'));
        const targetAudienceEn = translateTargetAudience(targetAudience);
        
        // 插入 targetAudienceEn
        const replacement = beforeUserGroups + 
          `,\n    targetAudienceEn: [${targetAudienceEn.map(item => `'${item}'`).join(', ')}]` +
          afterTargetAudience;
        return replacement;
      } catch (e) {
        console.log('警告：無法解析 targetAudience:', targetAudienceStr);
        return match;
      }
    }
    return match;
  }
);

// 處理 tags 字段
content = content.replace(
  /(\{[^{}]*?id:\s*'[^']*'[^{}]*?tags:\s*\[[^\]]*?\])(,?\s*(?:tagsEn[^,}]*?,?\s*)?url[^}]*?\})/g,
  (match, beforeUrl, afterTags) => {
    // 提取 tags 陣列
    const tagsMatch = match.match(/tags:\s*(\[[^\]]*?\])/);
    if (tagsMatch && !match.includes('tagsEn:')) {
      const tagsStr = tagsMatch[1];
      try {
        const tags = JSON.parse(tagsStr.replace(/'/g, '"'));
        const tagsEn = translateTags(tags);
        
        // 插入 tagsEn
        const replacement = beforeUrl +
          `,\n    tagsEn: [${tagsEn.map(item => `'${item}'`).join(', ')}]` +
          afterTags;
        return replacement;
      } catch (e) {
        console.log('警告：無法解析 tags:', tagsStr);
        return match;
      }
    }
    return match;
  }
);

// 寫入檔案
fs.writeFileSync(filePath, content, 'utf8');
console.log('✅ 所有工具的英文字段添加完成！'); 